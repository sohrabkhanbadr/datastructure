### کد خاکستری (Gray Code) چیست؟

کد خاکستری (Gray Code) یک سیستم کدگذاری باینری است که در آن دو عدد متوالی تنها در یک بیت تفاوت دارند. این ویژگی باعث کاهش خطاها در هنگام انتقال داده‌ها و تبدیل مقادیر می‌شود، زیرا تغییر تنها یک بیت به معنای کاهش احتمال بروز خطا در فرآیند انتقال است.

**ویژگی‌های اصلی کد خاکستری:**
- **تغییر تنها یک بیت**: در کد خاکستری، هر تغییر از یک مقدار به مقدار بعدی تنها در یک بیت تغییر ایجاد می‌کند. این ویژگی به ویژه در سیستم‌های دیجیتال و کاربردهای الکترونیکی مفید است.
- **کاهش خطا**: به دلیل اینکه تنها یک بیت تغییر می‌کند، احتمال بروز خطا در انتقال داده‌ها و خواندن مقادیر کاهش می‌یابد.
- **تبدیل ساده**: تبدیل بین کد باینری و کد خاکستری با استفاده از عملیات ساده منطقی امکان‌پذیر است.

### کد پایتون برای تولید کد خاکستری

در زیر یک کد پایتون برای تولید کد خاکستری \(n\)-بیتی آورده شده است:

```python
def binary_to_gray(n):
    # تبدیل عدد باینری به کد خاکستری
    return n ^ (n >> 1)

def generate_gray_code(bits):
    # تولید کد خاکستری برای تعداد بیت‌های مشخص
    gray_codes = []
    for i in range(2 ** bits):
        gray = binary_to_gray(i)
        gray_codes.append(format(gray, f'0{bits}b'))
    return gray_codes

# تعداد بیت‌های کد خاکستری
num_bits = 3
gray_codes = generate_gray_code(num_bits)

# چاپ کدهای خاکستری
print("Gray Code sequence for", num_bits, "bits:")
for code in gray_codes:
    print(code)
```

**توضیحات:**
1. **تابع `binary_to_gray`**: این تابع عدد باینری را به کد خاکستری تبدیل می‌کند. با استفاده از عمل XOR بین عدد باینری و آن را با یک بیت به راست شیفت داده، کد خاکستری را محاسبه می‌کند.
2. **تابع `generate_gray_code`**: این تابع کدهای خاکستری برای تعداد بیت‌های مشخص شده را تولید می‌کند. ابتدا تمام مقادیر باینری را از ۰ تا \(2^n - 1\) تولید کرده و سپس هر کدام را به کد خاکستری تبدیل می‌کند.
3. **متغیر `num_bits`**: تعداد بیت‌های کد خاکستری که می‌خواهیم تولید کنیم.
4. **چاپ کدهای خاکستری**: در پایان کدهای خاکستری تولید شده برای هر مقدار بیت به صورت رشته باینری چاپ می‌شود.

### کاربردهای کد خاکستری

1. **انکودرهای دوار**: در انکودرهای دوار که برای اندازه‌گیری موقعیت و حرکت استفاده می‌شوند، کد خاکستری به کاهش خطاها کمک می‌کند. زیرا تنها یک بیت در هر تغییر از مقدار قبلی تغییر می‌کند و بنابراین احتمال خطاهای موقعیتی کاهش می‌یابد.

2. **انتقال داده**: در سیستم‌های انتقال داده، کد خاکستری برای کاهش خطاها و بهبود دقت استفاده می‌شود. با تغییر تنها یک بیت در هر انتقال، احتمال بروز خطا در فرآیند انتقال داده‌ها کاهش می‌یابد.

3. **مبدل‌های آنالوگ به دیجیتال**: در مبدل‌های ADC که سیگنال‌های آنالوگ را به دیجیتال تبدیل می‌کنند، استفاده از کد خاکستری می‌تواند دقت تبدیل را بهبود بخشد و خطاهای احتمالی را کاهش دهد.

4. **سیستم‌های ارتباطی**: در سیستم‌های ارتباطی، به ویژه در پروتکل‌های کدگذاری و تصحیح خطا، کد خاکستری به بهبود قابلیت اطمینان و کاهش خطاها کمک می‌کند.

با توجه به ویژگی‌های خاص کد خاکستری و کاربردهای آن، این سیستم کدگذاری در بسیاری از فناوری‌ها و سیستم‌های دیجیتال برای بهبود دقت و کاهش خطاها بسیار مفید است.

## تبدیل کد باینری به کد خاکستری چگونه است؟



---

### جدول تبدیل کد باینری به کد خاکستری

| عدد باینری | معادل کد خاکستری |
|------------|-------------------|
| 0000       | 0000              |
| 0001       | 0001              |
| 0010       | 0011              |
| 0011       | 0010              |
| 0100       | 0110              |
| 0101       | 0111              |
| 0110       | 0101              |
| 0111       | 0100              |
| 1000       | 1100              |
| 1001       | 1101              |
| 1010       | 1111              |
| 1011       | 1110              |
| 1100       | 1010              |
| 1101       | 1011              |
| 1110       | 1001              |
| 1111       | 1000              |

### توضیحات:

1. **عدد باینری**: مقادیر مختلف در قالب باینری.
2. **معادل کد خاکستری**: مقادیر متناظر در قالب کد خاکستری.

**روش تبدیل باینری به کد خاکستری:**

برای تبدیل یک عدد باینری به کد خاکستری:
- بیت اول کد خاکستری همان بیت اول باینری است.
- بیت‌های بعدی کد خاکستری را با استفاده از عملیات XOR محاسبه می‌کنیم:
  - هر بیت در کد خاکستری برابر است با نتیجه XOR بیت باینری فعلی و بیت قبلی آن.

**مثال:**

برای عدد باینری `1101`:
- بیت اول در کد خاکستری همان بیت اول باینری است: `1`
- بیت دوم در کد خاکستری: `1 XOR 1 = 0`
- بیت سوم در کد خاکستری: `1 XOR 0 = 1`
- بیت چهارم در کد خاکستری: `0 XOR 1 = 1`
- بنابراین، معادل کد خاکستری برای `1101` برابر با `1011` است.

---


## reference
Chatgpt 4o
